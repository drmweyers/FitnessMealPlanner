# Redis Sentinel Configuration - Instance 2
# High Availability monitoring for FitnessMealPlanner Redis

################################# GENERAL #####################################

# Sentinel service port
port 26379

# Sentinel instance ID (unique per sentinel)
sentinel announce-ip 127.0.0.1
sentinel announce-port 26379

# Working directory
dir /tmp

# Log level
loglevel notice
logfile /var/log/redis/sentinel-2.log

################################# MONITORING ################################

# Master monitoring configuration
# sentinel monitor <master-name> <master-ip> <master-port> <quorum>
sentinel monitor fitnessmealplanner-master redis-primary 6379 2

# Master authentication
# sentinel auth-pass fitnessmealplanner-master <password>

# Connection timeout
sentinel down-after-milliseconds fitnessmealplanner-master 5000

# Failover timeout
sentinel failover-timeout fitnessmealplanner-master 60000

# Parallel synchronization
sentinel parallel-syncs fitnessmealplanner-master 1

################################# NOTIFICATION ##############################

# Notification scripts
# sentinel notification-script fitnessmealplanner-master /var/redis/notify.sh

# Client reconfiguration script
# sentinel client-reconfig-script fitnessmealplanner-master /var/redis/reconfig.sh

################################# SECURITY ###################################

# Sentinel authentication (protect sentinel instances)
# requirepass <sentinel-password>

# Sentinel authentication for other sentinels
# sentinel auth-user default
# sentinel auth-pass <sentinel-password>

################################# ADVANCED ###################################

# Deny dangerous commands
sentinel deny-scripts-reconfig yes

# TILT mode protection
sentinel resolve-hostnames yes
sentinel announce-hostnames yes

################################# RUNTIME CONFIGURATION ####################

# These settings can be modified at runtime via SENTINEL SET command

# Minimum time between failovers
sentinel min-slaves-to-write 0
sentinel min-slaves-max-lag 10

# Master down time threshold
sentinel master-reboot-down-after-period fitnessmealplanner-master 0

# Quorum threshold (minimum sentinels needed for decision)
# Already set above in monitor command: quorum = 2